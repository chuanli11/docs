<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.run.ai/admin/runai-setup/cluster-setup/cluster-troubleshooting/ rel=canonical><link rel=icon href=../../../../images/favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.6"><title>Troubleshooting - Run:ai Documentation Library</title><link rel=stylesheet href=../../../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../../stylesheets/extra.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-122651141-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property=og:title content=Troubleshooting><meta property=og:description content=" | Determining Cluster Health |   1. Verify that data is sent to the cloud.     2. Verify that the Run:ai services are running.     3. Submit a Job.      | Symptom: Metrics are not showing on Overview Dashboard |    | Symptom: Projects are not syncing |    | Symptom: Cluster Installation failed on Rancher-based Kubernetes (RKE) |    | Symptom: Jobs fail with ContainerCannotRun status |    | Diagnostic Tools |   Adding Verbosity to Database container.     Internal Networking Issues.     "><meta property=og:image content=https://docs.run.ai/home/img/RUNAI-LOGO-DIGITAL-2C_BP.png></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#determining-cluster-health class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Run:ai Documentation Library" class="md-header__button md-logo" aria-label="Run:ai Documentation Library" data-md-component=logo> <img src=../../../../images/RUNAI-LOGO-DIGITAL-2C_WP.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Run:ai Documentation Library </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Troubleshooting </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/run-ai/docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../overview-administrator/ class="md-tabs__link md-tabs__link--active"> Administrator </a> </li> <li class=md-tabs__item> <a href=../../../../Researcher/overview-researcher/ class=md-tabs__link> Researcher </a> </li> <li class=md-tabs__item> <a href=../../../../developer/overview-developer/ class=md-tabs__link> Developer </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Run:ai Documentation Library" class="md-nav__button md-logo" aria-label="Run:ai Documentation Library" data-md-component=logo> <img src=../../../../images/RUNAI-LOGO-DIGITAL-2C_WP.svg alt=logo> </a> Run:ai Documentation Library </label> <div class=md-nav__source> <a href=https://github.com/run-ai/docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../home/components/ class=md-nav__link> System Components </a> </li> <li class=md-nav__item> <a href=../../../../home/whats-new-2022/ class=md-nav__link> Whats New 2022 </a> </li> <li class=md-nav__item> <a href=../../../../home/whats-new-2021/ class=md-nav__link> Whats New 2021 </a> </li> <li class=md-nav__item> <a href=../../../../home/whats-new-2020/ class=md-nav__link> Whats New 2020 </a> </li> <li class=md-nav__item> <a href=../../../../home/data-privacy-details/ class=md-nav__link> Data Privacy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Administrator <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Administrator data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Administrator </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview-administrator/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2> Run:ai Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Run:ai Setup" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Run:ai Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../installation-types/ class=md-nav__link> Installation Types </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_2 type=checkbox id=__nav_2_2_2 checked> <label class=md-nav__link for=__nav_2_2_2> Classic (SaaS) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classic (SaaS)" data-md-level=3> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Classic (SaaS) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cluster-setup-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../cluster-prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../cluster-install/ class=md-nav__link> Cluster Install </a> </li> <li class=md-nav__item> <a href=../customize-cluster-install/ class=md-nav__link> Customize Installation </a> </li> <li class=md-nav__item> <a href=../cluster-upgrade/ class=md-nav__link> Cluster Upgrade </a> </li> <li class=md-nav__item> <a href=../cluster-delete/ class=md-nav__link> Cluster Delete </a> </li> <li class=md-nav__item> <a href=../install-k8s/ class=md-nav__link> Kubernetes Install </a> </li> <li class=md-nav__item> <a href=../single-node-install/ class=md-nav__link> Quick Single Node Install </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Troubleshooting </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#determining-cluster-health class=md-nav__link> Determining Cluster Health </a> <nav class=md-nav aria-label="Determining Cluster Health"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-verify-that-data-is-sent-to-the-cloud class=md-nav__link> 1. Verify that data is sent to the cloud </a> </li> <li class=md-nav__item> <a href=#2-verify-that-the-runai-services-are-running class=md-nav__link> 2. Verify that the Run:ai services are running </a> </li> <li class=md-nav__item> <a href=#3-submit-a-job class=md-nav__link> 3. Submit a Job </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#symptom-metrics-are-not-showing-on-overview-dashboard class=md-nav__link> Symptom: Metrics are not showing on Overview Dashboard </a> </li> <li class=md-nav__item> <a href=#symptom-projects-are-not-syncing class=md-nav__link> Symptom: Projects are not syncing </a> </li> <li class=md-nav__item> <a href=#symptom-cluster-installation-failed-on-rancher-based-kubernetes-rke class=md-nav__link> Symptom: Cluster Installation failed on Rancher-based Kubernetes (RKE) </a> </li> <li class=md-nav__item> <a href=#symptom-jobs-fail-with-containercannotrun-status class=md-nav__link> Symptom: Jobs fail with ContainerCannotRun status </a> </li> <li class=md-nav__item> <a href=#diagnostic-tools class=md-nav__link> Diagnostic Tools </a> <nav class=md-nav aria-label="Diagnostic Tools"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-verbosity-to-database-container class=md-nav__link> Adding Verbosity to Database container </a> </li> <li class=md-nav__item> <a href=#internal-networking-issues class=md-nav__link> Internal Networking Issues </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3 type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3> Self-hosted <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Self-hosted data-md-level=3> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Self-hosted </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../self-hosted/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3_2 type=checkbox id=__nav_2_2_3_2> <label class=md-nav__link for=__nav_2_2_3_2> Kubernetes-based <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes-based data-md-level=4> <label class=md-nav__title for=__nav_2_2_3_2> <span class="md-nav__icon md-icon"></span> Kubernetes-based </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../self-hosted/k8s/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/preparations/ class=md-nav__link> Preperations </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/backend/ class=md-nav__link> Install Control Plane </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/cluster/ class=md-nav__link> Install a Cluster </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/ui/ class=md-nav__link> Configure Web Interfaces </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/project-management/ class=md-nav__link> Manually Create Projects </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/next-steps/ class=md-nav__link> Next Steps </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/upgrade/ class=md-nav__link> Upgrade </a> </li> <li class=md-nav__item> <a href=../../self-hosted/k8s/uninstall/ class=md-nav__link> Uninstall </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3_3 type=checkbox id=__nav_2_2_3_3> <label class=md-nav__link for=__nav_2_2_3_3> OpenShift-based <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=OpenShift-based data-md-level=4> <label class=md-nav__title for=__nav_2_2_3_3> <span class="md-nav__icon md-icon"></span> OpenShift-based </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../self-hosted/ocp/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/preparations/ class=md-nav__link> Preperations </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/ocp-dependencies/ class=md-nav__link> Install Dependencies </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/backend/ class=md-nav__link> Install Control Plane </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/cluster/ class=md-nav__link> Install a Cluster </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/project-management/ class=md-nav__link> Manually Create Projects </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/next-steps/ class=md-nav__link> Next Steps </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/upgrade/ class=md-nav__link> Upgrade </a> </li> <li class=md-nav__item> <a href=../../self-hosted/ocp/uninstall/ class=md-nav__link> Uninstall </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_4 type=checkbox id=__nav_2_2_4> <label class=md-nav__link for=__nav_2_2_4> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Configuration data-md-level=3> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../config/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../config/node-roles/ class=md-nav__link> Set Node Roles </a> </li> <li class=md-nav__item> <a href=../../config/access-roles/ class=md-nav__link> Review Kubernetes Access provided to Run:ai </a> </li> <li class=md-nav__item> <a href=../../config/allow-external-access-to-containers/ class=md-nav__link> External access to Containers </a> </li> <li class=md-nav__item> <a href=../../config/non-root-containers/ class=md-nav__link> User Identity in Container </a> </li> <li class=md-nav__item> <a href=../../config/cli-admin-install/ class=md-nav__link> Install Administrator CLI </a> </li> <li class=md-nav__item> <a href=../../config/dr/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_5 type=checkbox id=__nav_2_2_5> <label class=md-nav__link for=__nav_2_2_5> Authentication <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Authentication data-md-level=3> <label class=md-nav__title for=__nav_2_2_5> <span class="md-nav__icon md-icon"></span> Authentication </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../authentication/authentication-overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../authentication/researcher-authentication/ class=md-nav__link> Researcher Authentication </a> </li> <li class=md-nav__item> <a href=../../authentication/sso/ class=md-nav__link> Single Sign-On </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_6 type=checkbox id=__nav_2_2_6> <label class=md-nav__link for=__nav_2_2_6> Maintenance <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Maintenance data-md-level=3> <label class=md-nav__title for=__nav_2_2_6> <span class="md-nav__icon md-icon"></span> Maintenance </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../maintenance/node-downtime/ class=md-nav__link> Node Downtime </a> </li> <li class=md-nav__item> <a href=../../maintenance/monitoring/ class=md-nav__link> Monitoring Cluster Health </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> Researcher Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Researcher Setup" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Researcher Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../researcher-setup/researcher-setup-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/cli-install/ class=md-nav__link> Install the CLI </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/cli-troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/researcher-ui-setup/ class=md-nav__link> Researcher UI </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/docker-registry-config/ class=md-nav__link> Use a Docker Registry with Credentials </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/docker-to-runai/ class=md-nav__link> Switch from Docker to Run:ai </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/limit-to-node-group/ class=md-nav__link> Group Nodes </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/use-secrets/ class=md-nav__link> Use Secrets in Jobs </a> </li> <li class=md-nav__item> <a href=../../../researcher-setup/templates/ class=md-nav__link> Templates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> User Interface <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Interface" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> User Interface </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-ui-setup/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../admin-ui-setup/admin-ui-users/ class=md-nav__link> Users </a> </li> <li class=md-nav__item> <a href=../../../admin-ui-setup/project-setup/ class=md-nav__link> Projects </a> </li> <li class=md-nav__item> <a href=../../../admin-ui-setup/department-setup/ class=md-nav__link> Departments </a> </li> <li class=md-nav__item> <a href=../../../admin-ui-setup/dashboard-analysis/ class=md-nav__link> Dashboard Analysis </a> </li> <li class=md-nav__item> <a href=../../../admin-ui-setup/jobs/ class=md-nav__link> Jobs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Integrations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integrations data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../integration/jupyterhub/ class=md-nav__link> JupyterHub </a> </li> <li class=md-nav__item> <a href=../../../integration/airflow/ class=md-nav__link> Airflow </a> </li> <li class=md-nav__item> <a href=../../../integration/mlflow/ class=md-nav__link> MLflow </a> </li> <li class=md-nav__item> <a href=../../../integration/kubeflow/ class=md-nav__link> Kubeflow </a> </li> <li class=md-nav__item> <a href=../../../integration/seldon/ class=md-nav__link> Seldon Core </a> </li> <li class=md-nav__item> <a href=../../../integration/clearml/ class=md-nav__link> ClearML </a> </li> <li class=md-nav__item> <a href=../../../integration/kubevirt/ class=md-nav__link> KubeVirt (VM) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> Presentations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Presentations data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Presentations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../presentations/administrator-onboarding-presentation/ class=md-nav__link> Admin Onboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Researcher <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Researcher data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Researcher </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/overview-researcher/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Quickstart Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quickstart Guides" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Quickstart Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/quickstart-overview/ class=md-nav__link> Run:ai Quickstart Guides </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-train/ class=md-nav__link> Training </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-build/ class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-build-ports/ class=md-nav__link> Build with Connected Ports </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-fractions/ class=md-nav__link> GPU Fractions </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-distributed-training/ class=md-nav__link> Distributed Training Workloads </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-hpo/ class=md-nav__link> Hyperparameter Optimization </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-overquota/ class=md-nav__link> Over-Quota, Basic Fairness & Bin-Packing </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-queue-fairness/ class=md-nav__link> Queue Fairness </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/walkthrough-elasticity/ class=md-nav__link> Elasticity </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/Walkthroughs/quickstart-inference/ class=md-nav__link> Inference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> CLI Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CLI Reference" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CLI Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/Introduction/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-attach/ class=md-nav__link> runai attach </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-bash/ class=md-nav__link> runai bash </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-config/ class=md-nav__link> runai config </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-delete/ class=md-nav__link> runai delete </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-describe/ class=md-nav__link> runai describe </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-exec/ class=md-nav__link> runai exec </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-list/ class=md-nav__link> runai list </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-login/ class=md-nav__link> runai login </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-logout/ class=md-nav__link> runai logout </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-logs/ class=md-nav__link> runai logs </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-resume/ class=md-nav__link> runai resume </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-submit/ class=md-nav__link> runai submit </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-submit-mpi/ class=md-nav__link> runai submit-mpi </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-suspend/ class=md-nav__link> runai suspend </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-template/ class=md-nav__link> runai template </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-top-node/ class=md-nav__link> runai top node </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-top-job/ class=md-nav__link> runai top job </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-update/ class=md-nav__link> runai update </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-version/ class=md-nav__link> runai version </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/cli-reference/runai-whoami/ class=md-nav__link> runai whoami </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Best Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Best Practices" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/best-practices/bare-metal-to-docker-images/ class=md-nav__link> Bare-Metal to Docker Images </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/best-practices/convert-to-unattended/ class=md-nav__link> Convert a Workload to Run Unattended </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/best-practices/save-dl-checkpoints/ class=md-nav__link> Save Deep Learning Checkpoints </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/best-practices/env-variables/ class=md-nav__link> Environment Variables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Scheduling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Scheduling data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Scheduling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/scheduling/the-runai-scheduler/ class=md-nav__link> The Run:ai Scheduler </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/scheduling/allocation-of-cpu-and-memory/ class=md-nav__link> Allocation of CPU and Memory </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/scheduling/job-statuses/ class=md-nav__link> Job Statuses </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/scheduling/auto-delete-jobs/ class=md-nav__link> Automatically Delete Finished Workloads </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Researcher Library <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Researcher Library" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Researcher Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/researcher-library/researcher-library-overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/researcher-library/rl-elasticity/ class=md-nav__link> Elasticity </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/researcher-library/rl-reporting/ class=md-nav__link> Reporting </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/researcher-library/rl-hpo-support/ class=md-nav__link> HPO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/tools/dev-vscode/ class=md-nav__link> Visual Studio Code </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/tools/dev-pycharm/ class=md-nav__link> PyCharm </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/tools/dev-x11forward-pycharm/ class=md-nav__link> X11 & PyCharm </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/tools/dev-jupyter/ class=md-nav__link> Jupyter Notebook </a> </li> <li class=md-nav__item> <a href=../../../../Researcher/tools/dev-tensorboard/ class=md-nav__link> TensorBoard </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Presentations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Presentations data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Presentations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Researcher/presentations/researcher-onboarding-presentation/ class=md-nav__link> Researcher Onboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Developer <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Developer data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/overview-developer/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../developer/rest-auth/ class=md-nav__link> Calling REST APIs </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Researcher API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Researcher API" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Researcher API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/researcher-rest-api/overview/ class=md-nav__link> REST API </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> Kubernetes API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Kubernetes API" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Kubernetes API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/k8s-api/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../developer/k8s-api/launch-job-via-yaml/ class=md-nav__link> Submit a Job via YAML </a> </li> <li class=md-nav__item> <a href=../../../../developer/k8s-api/launch-job-via-kubernetes-api/ class=md-nav__link> Submit a Job via Kubernetes API </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../developer/admin-rest-api/overview/ class=md-nav__link> Administrator API </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Inference API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Inference API" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Inference API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/inference/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../developer/inference/setup/ class=md-nav__link> Setup </a> </li> <li class=md-nav__item> <a href=../../../../developer/inference/submit-via-cli/ class=md-nav__link> Submit via CLI </a> </li> <li class=md-nav__item> <a href=../../../../developer/inference/submit-via-yaml/ class=md-nav__link> Submit via YAML </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Metrics API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Metrics API" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Metrics API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/metrics/metrics/ class=md-nav__link> Metrics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#determining-cluster-health class=md-nav__link> Determining Cluster Health </a> <nav class=md-nav aria-label="Determining Cluster Health"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-verify-that-data-is-sent-to-the-cloud class=md-nav__link> 1. Verify that data is sent to the cloud </a> </li> <li class=md-nav__item> <a href=#2-verify-that-the-runai-services-are-running class=md-nav__link> 2. Verify that the Run:ai services are running </a> </li> <li class=md-nav__item> <a href=#3-submit-a-job class=md-nav__link> 3. Submit a Job </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#symptom-metrics-are-not-showing-on-overview-dashboard class=md-nav__link> Symptom: Metrics are not showing on Overview Dashboard </a> </li> <li class=md-nav__item> <a href=#symptom-projects-are-not-syncing class=md-nav__link> Symptom: Projects are not syncing </a> </li> <li class=md-nav__item> <a href=#symptom-cluster-installation-failed-on-rancher-based-kubernetes-rke class=md-nav__link> Symptom: Cluster Installation failed on Rancher-based Kubernetes (RKE) </a> </li> <li class=md-nav__item> <a href=#symptom-jobs-fail-with-containercannotrun-status class=md-nav__link> Symptom: Jobs fail with ContainerCannotRun status </a> </li> <li class=md-nav__item> <a href=#diagnostic-tools class=md-nav__link> Diagnostic Tools </a> <nav class=md-nav aria-label="Diagnostic Tools"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-verbosity-to-database-container class=md-nav__link> Adding Verbosity to Database container </a> </li> <li class=md-nav__item> <a href=#internal-networking-issues class=md-nav__link> Internal Networking Issues </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/run-ai/docs/edit/master/docs/admin/runai-setup/cluster-setup/cluster-troubleshooting.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Troubleshooting</h1> <h2 id=determining-cluster-health>Determining Cluster Health<a class=headerlink href=#determining-cluster-health title="Permanent link">&para;</a></h2> <p>Following are a set of tests to run to determine cluster health:</p> <h3 id=1-verify-that-data-is-sent-to-the-cloud>1. Verify that data is sent to the cloud<a class=headerlink href=#1-verify-that-data-is-sent-to-the-cloud title="Permanent link">&para;</a></h3> <p>Log in to <code>&lt;company-name&gt;.run.ai/dashboards/now</code>.</p> <ul> <li>Verify that all metrics in the overview dashboard are showing. Specifically the list of nodes and the numeric indicators</li> <li>Go to <strong>Projects</strong> and create a new Project. Find the new Project using the CLI command: <code>runai list projects</code></li> </ul> <h3 id=2-verify-that-the-runai-services-are-running>2. Verify that the Run:ai services are running<a class=headerlink href=#2-verify-that-the-runai-services-are-running title="Permanent link">&para;</a></h3> <p>Run:</p> <div class=highlight><pre><span></span><code>kubectl get pods -n runai
</code></pre></div> <ul> <li>Verify that all pods are in <code>Running</code> status and in a ready state (1/1 or similar)</li> <li>Identify the <code>runai-db-0</code> and <code>runai-agent-&lt;id&gt;</code> pods. Run: <code>kubectl logs -n runai &lt;pod name&gt;</code> and verify that there are no errors.</li> </ul> <p>Run:</p> <div class=highlight><pre><span></span><code>kubectl get deployments -n runai
</code></pre></div> <p>Check that all deployments are in a ready state (1/1)</p> <p>Run:</p> <div class=highlight><pre><span></span><code>kubectl get daemonset -n runai
</code></pre></div> <p>A <em>Daemonset</em> runs on every node. Some of the Run:ai daemon-sets run on all nodes. Others run only on nodes that contain GPUs. Verify that for all daemonsets the <em>desired</em> number is equal to <em>current</em> and to <em>ready</em>. </p> <p>Run:</p> <div class=highlight><pre><span></span><code>runai list projects
</code></pre></div> <p>Create a Project using the Run:ai user interface and verify that the Project is reflected in the above command. </p> <h3 id=3-submit-a-job>3. Submit a Job<a class=headerlink href=#3-submit-a-job title="Permanent link">&para;</a></h3> <p>Submitting a Job will allow you to verify that the Run:ai scheduling service is in order. </p> <ul> <li>Make sure that the Project you have created has a quota of at least 1 GPU</li> <li>Run:</li> </ul> <div class=highlight><pre><span></span><code>runai config project &lt;project-name&gt;
runai submit -i gcr.io/run-ai-demo/quickstart -g 1
</code></pre></div> <ul> <li>Verify that the Job is a <em>Running</em> state when running: </li> </ul> <div class=highlight><pre><span></span><code>runai list jobs
</code></pre></div> <ul> <li>Verify that the Job is showing in the Jobs area at <code>&lt;company-name&gt;.run.ai/jobs</code>.</li> </ul> <h2 id=symptom-metrics-are-not-showing-on-overview-dashboard>Symptom: Metrics are not showing on Overview Dashboard<a class=headerlink href=#symptom-metrics-are-not-showing-on-overview-dashboard title="Permanent link">&para;</a></h2> <p>Some or all metrics are not showing in <code>&lt;company-name&gt;.run.ai/dashboards/now</code></p> <p><strong>Typical root causes:</strong></p> <ul> <li>NVIDIA prerequisites have not been met.</li> <li>Firewall-related issues.</li> <li>Internal clock is not synced.</li> <li>Prometheus pods are not running</li> </ul> <p><strong>NVIDIA prerequisites have not been met</strong></p> <p>Run:</p> <div class=highlight><pre><span></span><code>runai pods -n runai | grep nvidia
</code></pre></div> <p>Select one of the NVIDIA pods and run:</p> <div class=highlight><pre><span></span><code>kubectl logs -n runai nvidia-device-plugin-daemonset-&lt;id&gt;
</code></pre></div> <p>If the log contains an error, it means that NVIDIA-related prerequisites have not been met. Review <a href=../cluster-prerequisites/ >NVIDIA prerequisites</a>. Verify that:</p> <ul> <li>Step 1.1: CUDA Toolkit is installed</li> <li>Step 1.2: NVIDIA Docker is installed. A typical issue here is the installation of the <em>NVIDIA Container Toolkit</em> instead of <em>NVIDIA Docker 2</em>. </li> <li>Step 1.3: Verify that NVIDIA Docker is the <strong>default</strong> docker runtime</li> <li>If the system has recently been installed, verify that docker has restarted by running the aforementioned <code>pkill</code> command</li> <li>Check the status of Docker by running:</li> </ul> <div class=highlight><pre><span></span><code>sudo systemctl status docker
</code></pre></div> <p><strong>Firewall issues</strong></p> <p>Add verbosity to Prometheus by editing RunaiConfig:</p> <div class=highlight><pre><span></span><code>kubectl edit runaiconfig runai -n runai
</code></pre></div> <p>Add a <code>debug</code> log level:</p> <div class=highlight><pre><span></span><code><span class=nt>prometheus-operator</span><span class=p>:</span>
  <span class=nt>prometheus</span><span class=p>:</span>
    <span class=nt>prometheusSpec</span><span class=p>:</span>
      <span class=nt>logLevel</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">debug</span>
</code></pre></div> <p>Run: <div class=highlight><pre><span></span><code>kubectl logs  prometheus-runai-prometheus-operator-prometheus-0 prometheus \
      -n runai -f --tail 100
</code></pre></div></p> <p>Verify that there are no errors. If there are connectivity related errors you may need to:</p> <ul> <li>Check your firewall for outbound connections. See the required permitted URL list in: <a href=../cluster-prerequisites/#network-requirements.md>Network requirements</a>.</li> <li>If you need to set up an internet proxy or certificate, please contact Run:ai customer support. </li> </ul> <p><strong>Machine Clocks are not synced</strong></p> <p>Run: <code>date</code> on cluster nodes and verify that date/time is correct. If not,</p> <ul> <li>Set the Linux time service (NTP).</li> <li>Restart Run:ai services. Depending on the previous time gap between servers, you may need to reinstall the Run:ai cluster</li> </ul> <p><strong>Prometheus pods are not running</strong></p> <p>Run: <code>kubectl get pods -n monitoring -o wide</code></p> <ul> <li>Verify that all pods are running.</li> <li>The default Prometheus installation is not built for high availability. If a node is down, the Prometheus pod will not recover by itself unless manually deleted. Delete the pod to see it start on a different node and consider adding a second replica to Prometheus.</li> </ul> <h2 id=symptom-projects-are-not-syncing>Symptom: Projects are not syncing<a class=headerlink href=#symptom-projects-are-not-syncing title="Permanent link">&para;</a></h2> <p>Create a Project on the Run:ai user interface, then run: <code>runai list projects</code>. The new Project does <strong>not</strong> appear.</p> <p><strong>Typical root cause:</strong> The Run:ai <em>agent</em> is not syncing properly. This may be due to:</p> <ul> <li>A dependency on the internal Run:ai database. See <a href=#symptom-internal-database-has-not-started>separate</a> symptom below</li> <li>Firewall issues</li> </ul> <p>Run:</p> <div class=codehilite><pre><span></span><code>  runai pods -n runai | grep agent
</code></pre></div> <p>See if the agent is in <em>Running</em> state. Select the agent's full name and run:</p> <div class=codehilite><pre><span></span><code>  kubectl logs -n runai runai-agent-&lt;id&gt;
</code></pre></div> <p>Verify that there are no errors. If there are connectivity related errors you may need to:</p> <ul> <li>Check your firewall for outbound connections. See the required permitted URL list in: <a href=../cluster-prerequisites/#network-requirements.md>Network requirements</a>.</li> <li>If you need to setup an internet proxy or certificate, please contact Run:ai customer support. </li> </ul> <h2 id=symptom-cluster-installation-failed-on-rancher-based-kubernetes-rke>Symptom: Cluster Installation failed on Rancher-based Kubernetes (RKE)<a class=headerlink href=#symptom-cluster-installation-failed-on-rancher-based-kubernetes-rke title="Permanent link">&para;</a></h2> <p>Cluster is not installed. When running <code>kubectl get pods -n runai</code> you see that pod <code>init-ca</code> has not started</p> <p><strong>Resolution</strong></p> <p>During initialization, Run:ai creates a Certificate Signing Request (CSR) which needs to be approved by the cluster's Certificate Authority (CA). In RKE, this is not enabled by default, and the paths to your Certificate Authority's keypair must be referenced manually by adding the following parameters inside your cluster.yml file, under kube-controller:</p> <div class=highlight><pre><span></span><code><span class=nt>services</span><span class=p>:</span>
  <span class=nt>kube-controller</span><span class=p>:</span>
    <span class=nt>extra_args</span><span class=p>:</span>
      <span class=nt>cluster-signing-cert-file</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/ssl/kube-ca.pem</span>
      <span class=nt>cluster-signing-key-file</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/ssl/kube-ca-key.pem</span>
</code></pre></div> <p>For further information see <a href=https://github.com/rancher/rancher/issues/14674 target=_blank>here</a>.</p> <h2 id=symptom-jobs-fail-with-containercannotrun-status>Symptom: Jobs fail with ContainerCannotRun status<a class=headerlink href=#symptom-jobs-fail-with-containercannotrun-status title="Permanent link">&para;</a></h2> <p>When running <code>runai list jobs</code>, your Jobs has a status of <code>ContainerCannotRun</code>.</p> <p><strong>Resolution</strong></p> <p>The issue may be caused due to an unattended upgrade of the NVIDIA driver.</p> <p>To verify, run <code>runai describe job &lt;job-name&gt;</code>, and search for an error <code>driver/library version mismatch</code>.</p> <p>To fix: reboot the node on which the Job attempted to run.</p> <p>Going forward, we recommend blacklisting NVIDIA driver from unattended upgrades.<br> You can do that by editing <code>/etc/apt/apt.conf.d/50unattended-upgrades</code>, and adding <code>nvidia-driver-</code> to the <code>Unattended-Upgrade::Package-Blacklist</code> section.<br> It should look something like that:</p> <div class=highlight><pre><span></span><code>Unattended-Upgrade::Package-Blacklist {
    // The following matches all packages starting with linux-
//  &quot;linux-&quot;;
    &quot;nvidia-driver-&quot;;
</code></pre></div> <h2 id=diagnostic-tools>Diagnostic Tools<a class=headerlink href=#diagnostic-tools title="Permanent link">&para;</a></h2> <h3 id=adding-verbosity-to-database-container>Adding Verbosity to Database container<a class=headerlink href=#adding-verbosity-to-database-container title="Permanent link">&para;</a></h3> <p>Run:</p> <div class=highlight><pre><span></span><code>kubectl edit runaiconfig runai -n runai
</code></pre></div> <p>Under <code>spec</code>, add: </p> <div class=highlight><pre><span></span><code><span class=nt>spec</span><span class=p>:</span>
  <span class=nt>postgresql</span><span class=p>:</span>
    <span class=nt>image</span><span class=p>:</span>
      <span class=nt>debug</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>Then view the log by running:</p> <div class=highlight><pre><span></span><code>kubectl logs -n runai runa-db-0 
</code></pre></div> <h3 id=internal-networking-issues>Internal Networking Issues<a class=headerlink href=#internal-networking-issues title="Permanent link">&para;</a></h3> <p>Run:ai is based on Kubernetes. Kubernetes runs its own internal subnet with a separate DNS service. If you see in the logs that services have trouble connecting, the problem may reside there. You can find further information on how to debug Kubernetes DNS <a href=https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/ target=_blank>here</a>. Specifically, it is useful to start a Pod with networking utilities and use it for network resolution:</p> <div class=highlight><pre><span></span><code>kubectl run -i --tty netutils --image=dersimn/netutils -- bash
</code></pre></div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">March 23, 2022</span> </small> </div> </article> </div> </div> </main> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script> <script src=../../../../assets/javascripts/bundle.b1047164.min.js></script> <!-- Start of Swagger custom style. Should be before /body which is why its in scripts --> <link rel=stylesheet href=../../../../stylesheets/theme-outline.css> <!-- End of  Swagger custom style --> </body> </html>