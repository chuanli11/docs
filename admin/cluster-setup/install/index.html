<!DOCTYPE html><html> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href=../../../img/favicon.ico><title>Installing Run:AI on an on-premise Kubernetes Cluster &mdash; Run:AI</title><link rel=stylesheet href="//fonts.googleapis.com/css?family=Lato:400,700"><link rel=stylesheet href=//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.8.1/css/all.css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=//code.jquery.com/jquery-2.1.1.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>
        hljs.initHighlightingOnLoad();
    </script></head> <body ontouchstart> <div id=container> <aside> <div class=home> <div class=title> <button class=hamburger></button> <a href=../../.. class=site-name> Run:AI</a> </div> <div class=search> <div role=search> <form id=rtd-search-form class=wy-form action=../../../search.html method=get> <input type=text name=q placeholder="Search docs" title="Type search term here"> </form> </div> </div> </div> <nav class=nav> <ul class=root> <li class=toctree-l1><a class=nav-item href=../../..>Home</a></li> <li class=toctree-l1><button class="section nav-item">Administrator</button> <ul class=subnav> <li class="toctree-l2 current"><button class="section nav-item">Cluster Setup</button> <ul class=subnav> <li class="toctree-l3 current"><a href=./ class="nav-item current">Installing Run:AI on an on-premise Kubernetes Cluster</a> <ul class=subnav> <li class=toctree-l4><a class="nav-item toc" href=#step-1-install-kubernetes>Step 1: Install Kubernetes</a></li> <li class=toctree-l4><a class="nav-item toc" href=#step-2-nvidia>Step 2: NVIDIA</a></li> <li class=toctree-l4><a class="nav-item toc" href=#step-3-install-runai>Step 3: Install Run:AI</a></li> <li class=toctree-l4><a class="nav-item toc" href=#step-4-verifying-your-installation>Step 4: Verifying your Installation</a></li> <li class=toctree-l4><a class="nav-item toc" href=#next-steps>Next Steps</a></li> </ul></li> <li class=toctree-l3><a href=../prereq/ class=nav-item>Run:AI GPU Cluster Prerequisites</a></li> </ul></li> </ul></li> <li class=toctree-l1><button class="section nav-item">Researcher</button> <ul class=subnav> <li class=toctree-l2><button class="section nav-item hide">API Reference</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../researcher/api-reference/bash/ class=nav-item>runai bash</a></li> </ul></li> </ul></li> </ul> </nav> <div class=repo> <div class=previous><a href=../../..>&laquo; Previous</a></div> <div class=next><a href=../prereq/ >Next &raquo;</a></div> </div> </aside> <div id=spacer><button class=arrow></button></div> <main> <div class=home-top> <button class=hamburger></button> <a href=../../.. class=site-name> Run:AI</a> </div> <div id=main> <nav class=breadcrumbs> <ul> <li>Administrator &raquo; </li><li>Cluster Setup</li> </ul> </nav> <div id=content><h1 id=installing-runai-on-an-on-premise-kubernetes-cluster>Installing Run:AI on an on-premise Kubernetes Cluster</h1> <p>The following are instructions on how to install Run:AI on the customer Kubernetes Cluster. Prior to installation please review the installation prerequisites here: <a href=https://support.run.ai/hc/en-us/articles/360010227960-Run-AI-GPU-Cluster-Prerequisites>https://support.run.ai/hc/en-us/articles/360010227960-Run-AI-GPU-Cluster-Prerequisites</a></p> <h2 id=step-1-install-kubernetes>Step 1: Install Kubernetes</h2> <p>Installing Kubernetes is beyond the scope of this guide. There are plenty of good ways to install Kubernetes (listed here: <a href=https://kubernetes.io/docs/setup/ >https://kubernetes.io/docs/setup/</a>). We recommend Kubespray <a href=https://kubespray.io/#/ >https://kubespray.io/#/</a> . Download the latest <strong>stable</strong> version from <a href=https://github.com/kubernetes-sigs/kubespray>https://github.com/kubernetes-sigs/kubespray</a>. </p> <p>The following next steps assume that you have the Kubernetes command-line <em>kubectl</em> on your laptop and that it is configured to point to the Kubernetes cluster (by running <em>kubectl config use-context <name></em>)  </p> <h2 id=step-2-nvidia>Step 2: NVIDIA</h2> <p>On <strong>each machine</strong> with GPUs run the following steps 2.1 - 2.3:</p> <h3 id=step-21-install-nvidia-drivers>Step 2.1 Install NVIDIA Drivers</h3> <p>If NVIDIA drivers are not already installed on your GPU machines, please install them now. Note that on original NVIDIA hardware, these drivers are already installed by default. </p> <h3 id=step-22-install-nvidia-docker>Step 2.2: Install NVIDIA Docker</h3> <p>Run the following:</p> <div class=codehilite><pre><span></span><code><span class=err>distribution=$(. /etc/os-release;echo $ID$VERSION_ID)</span>
<span class=err>curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -</span>
<span class=err>curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list</span>
<span class=err>sudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-docker2</span>
<span class=err>sudo pkill -SIGHUP dockerd</span>
</code></pre></div> <h3 id=step-23-make-nvidia-docker-the-default-docker-runtime>Step 2.3: Make NVIDIA Docker the default docker runtime</h3> <p>You will need to enable the Nvidia runtime as your default docker runtime on your node. We will be editing the docker daemon config file which is usually present at<span> </span><code>/etc/docker/daemon.json</code>:</p> <div class=codehilite><pre><span></span><code><span class=err>{</span>
<span class=err>    &quot;default-runtime&quot;: &quot;nvidia&quot;,</span>
<span class=err>    &quot;runtimes&quot;: {</span>
<span class=err>        &quot;nvidia&quot;: {</span>
<span class=err>            &quot;path&quot;: &quot;/usr/bin/nvidia-container-runtime&quot;,</span>
<span class=err>            &quot;runtimeArgs&quot;: []</span>
<span class=err>        }</span>
<span class=err>    }</span>
<span class=err>}</span>
</code></pre></div> <p>Then run the following again:</p> <p><code>sudo pkill -SIGHUP dockerd</code></p> <h2 id=step-3-install-runai>Step 3: Install Run:AI</h2> <ul> <li>Log in to Run:AI at <a href=https://app.run.ai>https://app.run.ai. </a> Use credentials provided by Run:AI Customer Support to log in to the system</li> <li>If this is the first time anyone from your company has logged in, you will receive a dialog with instructions on how to install Run:AI on your Kubernetes Cluster.</li> <li>If not, open the menu on the top left and select "Clusters". On the top right-click "Add New Cluster". Continue according to instructions to install Run:AI on your Kubernetes Cluster</li> </ul> <h2 id=step-4-verifying-your-installation>Step 4: Verifying your Installation</h2> <ul> <li>Go to <a href=https://app.run.ai>https://app.run.ai</a></li> <li>Go to the Overview Dashboard</li> <li>Verify that the number of GPUs on the top right reflects your GPU resources on your cluster and the list of machines with GPU resources appear on the bottom line</li> </ul> <h2 id=next-steps>Next Steps</h2> <ul> <li>Researchers work via a Command-line interface (CLI). See <a href=https://support.run.ai/hc/en-us/articles/360010706120-Installing-the-Run-AI-Command-Line-Interface>https://support.run.ai/hc/en-us/articles/360010706120-Installing-the-Run-AI-Command-Line-Interface</a> on how to install the CLI for users</li> <li><span class=wysiwyg-color-black>Set up Admin UI Users. <a href=https://support.run.ai/hc/en-us/articles/360011591340-Working-with-Admin-UI-Users>https://support.run.ai/hc/en-us/articles/360011591340-Working-with-Admin-UI-Users</a></span></li> </ul></div> <footer> <div class=footer-buttons> <div class=previous><a href=../../.. title=Home><span>Previous</span></a></div> <div class=next><a href=../prereq/ title="Run:AI GPU Cluster Prerequisites"><span>Next</span></a></div> </div> <div class=footer-note> <p> Built with <a href=http://www.mkdocs.org>MkDocs</a> using <a href=https://github.com/daizutabi/mkdocs-ivory>Ivory theme</a>. </p> </div> </footer> </div> </main> </div> <script>var base_url = '../../..';</script> <script src=../../../js/theme.js></script> <script src=../../../search/main.js></script> </body> </html>