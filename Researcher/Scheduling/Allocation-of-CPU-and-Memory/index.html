<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.run.ai/Researcher/Scheduling/Allocation-of-CPU-and-Memory/ rel=canonical><link rel="shortcut icon" href=../../../images/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.0"><title>Allocation of CPU and Memory - Run:AI Documentation Library</title><link rel=stylesheet href=../../../assets/stylesheets/main.bc7e593a.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab28b872.min.css><!-- Start of runai Zendesk Widget script --><script id=ze-snippet src="https://static.zdassets.com/ekr/snippet.js?key=10c42c25-a684-4ac3-b45f-c9c03276af95"> </script><!-- End of runai Zendesk Widget script --><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-122651141-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://docs.run.ai/ title="Run:AI Documentation Library" class="md-header-nav__button md-logo" aria-label="Run:AI Documentation Library"> <img src=../../../images/runai-logo2.svg alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Run:AI Documentation Library </span> <span class="md-header-nav__topic md-ellipsis"> Allocation of CPU and Memory </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/run-ai/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../Administrator/overview-administrator/ class=md-tabs__link> Administrator </a> </li> <li class=md-tabs__item> <a href=../../overview-researcher/ class="md-tabs__link md-tabs__link--active"> Researcher </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://docs.run.ai/ title="Run:AI Documentation Library" class="md-nav__button md-logo" aria-label="Run:AI Documentation Library"> <img src=../../../images/runai-logo2.svg alt=logo> </a> Run:AI Documentation Library </label> <div class=md-nav__source> <a href=https://github.com/run-ai/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../home/components/ class=md-nav__link> System Components </a> </li> <li class=md-nav__item> <a href=../../../home/whats-new/ class=md-nav__link> Whats New </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Administrator <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Administrator data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Administrator </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/overview-administrator/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Cluster Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cluster Setup" data-md-level=2> <label class=md-nav__title for=nav-2-2> <span class="md-nav__icon md-icon"></span> Cluster Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-setup-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/single-node-install/ class=md-nav__link> Quick Single Node Install </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-install/ class=md-nav__link> Cluster Install </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-upgrade/ class=md-nav__link> Cluster Upgrade </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-delete/ class=md-nav__link> Cluster Delete </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/cluster-troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/install-k8s/ class=md-nav__link> Kubernetes Install </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2-9 type=checkbox id=nav-2-2-9> <label class=md-nav__link for=nav-2-2-9> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=3> <label class=md-nav__title for=nav-2-2-9> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/allow-external-access-to-containers/ class=md-nav__link> Allow external access to Containers </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/proxy-server/ class=md-nav__link> Add an Internet Proxy Server </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/researcher-authentication/ class=md-nav__link> Authentication and Authorization </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/limit-runai-install-to-specific-nodes/ class=md-nav__link> Limit Install to Specific Nodes </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/enforce-run-as-user/ class=md-nav__link> Enforce non-root Containers </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/kubernetes-config-best-practices/ class=md-nav__link> Kubernetes Best Practices </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/nfs-install/ class=md-nav__link> Configure NFS </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Cluster-Setup/node-downtime/ class=md-nav__link> Node Downtime </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> Researcher Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Researcher Setup" data-md-level=2> <label class=md-nav__title for=nav-2-3> <span class="md-nav__icon md-icon"></span> Researcher Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/researcher-setup-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/cli-install/ class=md-nav__link> Install the CLI </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/cli-troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/docker-registry-config/ class=md-nav__link> Use a Private Docker Registry </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/docker-to-runai/ class=md-nav__link> Switch from Docker to Run:AI </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/limit-to-node-group/ class=md-nav__link> Limit Run:AI to Specific Nodes </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/use-secrets/ class=md-nav__link> Use Secrets in Jobs </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Researcher-Setup/template-config/ class=md-nav__link> Configure Command-Line Interface Templates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4> <label class=md-nav__link for=nav-2-4> Admin UI Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Admin UI Setup" data-md-level=2> <label class=md-nav__title for=nav-2-4> <span class="md-nav__icon md-icon"></span> Admin UI Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/Admin-User-Interface-Setup/Adding-Updating-and-Deleting-Admin-UI-Users/ class=md-nav__link> Users </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Admin-User-Interface-Setup/Working-with-Projects/ class=md-nav__link> Projects </a> </li> <li class=md-nav__item> <a href=../../../Administrator/Admin-User-Interface-Setup/Working-with-Departments/ class=md-nav__link> Departments </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> Presentations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Presentations data-md-level=2> <label class=md-nav__title for=nav-2-5> <span class="md-nav__icon md-icon"></span> Presentations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/Presentations/Administrator-Onboarding-Presentation/ class=md-nav__link> Administrator Onboarding </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-6 type=checkbox id=nav-2-6> <label class=md-nav__link for=nav-2-6> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=2> <label class=md-nav__title for=nav-2-6> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Administrator/tools/launch-job-via-yaml/ class=md-nav__link> Submit workloads via YAML </a> </li> <li class=md-nav__item> <a href=../../../Administrator/tools/Launch-Workloads-using-Rancher-User-Interface/ class=md-nav__link> Submit workloads via Rancher </a> </li> <li class=md-nav__item> <a href=../../../Administrator/tools/airflow-integration/ class=md-nav__link> Airflow integration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Researcher <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Researcher data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Researcher </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview-researcher/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Quickstart Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quickstart Guides" data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"></span> Quickstart Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Walkthroughs/Run-AI-Walkthroughs/ class=md-nav__link> Run:AI Quickstart Guides </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-train/ class=md-nav__link> Training </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-build/ class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-build-ports/ class=md-nav__link> Build with Connected Ports </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-distributed-training/ class=md-nav__link> Distributed Training Workloads </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-hpo/ class=md-nav__link> Hyperparameter Optimization </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-overquota/ class=md-nav__link> Over-Quota, Basic Fairness & Bin-Packing </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-queue-fairness/ class=md-nav__link> Queue Fairness </a> </li> <li class=md-nav__item> <a href=../../Walkthroughs/walkthrough-elasticity/ class=md-nav__link> Elasticity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> CLI Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CLI Reference" data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"></span> CLI Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli-reference/Introduction/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-attach/ class=md-nav__link> runai attach </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-bash/ class=md-nav__link> runai bash </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-cluster/ class=md-nav__link> runai cluster </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-config/ class=md-nav__link> runai config </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-delete/ class=md-nav__link> runai delete </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-describe/ class=md-nav__link> runai describe </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-exec/ class=md-nav__link> runai exec </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-list/ class=md-nav__link> runai list </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-logs/ class=md-nav__link> runai logs </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-project/ class=md-nav__link> runai project </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-submit/ class=md-nav__link> runai submit </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-submit-mpi/ class=md-nav__link> runai submit-mpi </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-template/ class=md-nav__link> runai template </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-top-node/ class=md-nav__link> runai top node </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-update/ class=md-nav__link> runai update </a> </li> <li class=md-nav__item> <a href=../../cli-reference/runai-version/ class=md-nav__link> runai version </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Best Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Best Practices" data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best-practices/From-Bare-Metal-to-using-Docker-Images/ class=md-nav__link> Bare-Metal to Docker Images </a> </li> <li class=md-nav__item> <a href=../../best-practices/convert-to-unattended/ class=md-nav__link> Convert a Workload to Run Unattended </a> </li> <li class=md-nav__item> <a href=../../best-practices/Saving-Deep-Learning-Checkpoints/ class=md-nav__link> Save Deep Learning Checkpoints </a> </li> <li class=md-nav__item> <a href=../../best-practices/env-variables/ class=md-nav__link> Identify a Job from within Container </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-5 type=checkbox id=nav-3-5 checked> <label class=md-nav__link for=nav-3-5> Scheduling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Scheduling data-md-level=2> <label class=md-nav__title for=nav-3-5> <span class="md-nav__icon md-icon"></span> Scheduling </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Allocation of CPU and Memory <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Allocation of CPU and Memory </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#requesting-cpu-memory class=md-nav__link> Requesting CPU &amp; Memory </a> <nav class=md-nav aria-label="Requesting CPU & Memory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cpu-over-allocation class=md-nav__link> CPU over allocation </a> </li> <li class=md-nav__item> <a href=#memory-over-allocation class=md-nav__link> Memory over allocation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cpu-and-memory-limits class=md-nav__link> CPU and Memory limits </a> </li> <li class=md-nav__item> <a href=#flag-defaults class=md-nav__link> Flag Defaults </a> <nav class=md-nav aria-label="Flag Defaults"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defaults-for-cpu-flag class=md-nav__link> Defaults for --cpu flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-memory-flag class=md-nav__link> Defaults for --memory flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-cpu-limit-flag class=md-nav__link> Defaults for --cpu-limit flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-memory-limit-flag class=md-nav__link> Defaults for --memory-limit flag </a> </li> <li class=md-nav__item> <a href=#changing-the-ratios class=md-nav__link> Changing the ratios </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validating-cpu-memory-allocations class=md-nav__link> Validating CPU &amp; Memory Allocations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../The-Run-AI-Scheduler/ class=md-nav__link> The Run:AI Scheduler </a> </li> <li class=md-nav__item> <a href=../Job-Statuses/ class=md-nav__link> Job Statuses </a> </li> <li class=md-nav__item> <a href=../auto-delete-jobs/ class=md-nav__link> Automatically Delete Finished Workloads </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-6 type=checkbox id=nav-3-6> <label class=md-nav__link for=nav-3-6> Researcher Library <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Researcher Library" data-md-level=2> <label class=md-nav__title for=nav-3-6> <span class="md-nav__icon md-icon"></span> Researcher Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../researcher-library/researcher-library-overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../researcher-library/rl-elasticity/ class=md-nav__link> Elasticity </a> </li> <li class=md-nav__item> <a href=../../researcher-library/rl-reporting/ class=md-nav__link> Reporting </a> </li> <li class=md-nav__item> <a href=../../researcher-library/rl-hpo-support/ class=md-nav__link> HPO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-7 type=checkbox id=nav-3-7> <label class=md-nav__link for=nav-3-7> Presentations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Presentations data-md-level=2> <label class=md-nav__title for=nav-3-7> <span class="md-nav__icon md-icon"></span> Presentations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Presentations/Researcher-Onboarding-Presentation/ class=md-nav__link> Researcher Onboarding </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-8 type=checkbox id=nav-3-8> <label class=md-nav__link for=nav-3-8> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=2> <label class=md-nav__title for=nav-3-8> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tools/dev-vscode/ class=md-nav__link> Visual Studio Code </a> </li> <li class=md-nav__item> <a href=../../tools/dev-pycharm/ class=md-nav__link> PyCharm </a> </li> <li class=md-nav__item> <a href=../../tools/dev-x11forward-pycharm/ class=md-nav__link> X11 & PyCharm </a> </li> <li class=md-nav__item> <a href=../../tools/dev-jupyter/ class=md-nav__link> Jupyter Noteook </a> </li> <li class=md-nav__item> <a href=../../tools/dev-tensorboard/ class=md-nav__link> TensorBoard </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#requesting-cpu-memory class=md-nav__link> Requesting CPU &amp; Memory </a> <nav class=md-nav aria-label="Requesting CPU & Memory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cpu-over-allocation class=md-nav__link> CPU over allocation </a> </li> <li class=md-nav__item> <a href=#memory-over-allocation class=md-nav__link> Memory over allocation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cpu-and-memory-limits class=md-nav__link> CPU and Memory limits </a> </li> <li class=md-nav__item> <a href=#flag-defaults class=md-nav__link> Flag Defaults </a> <nav class=md-nav aria-label="Flag Defaults"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defaults-for-cpu-flag class=md-nav__link> Defaults for --cpu flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-memory-flag class=md-nav__link> Defaults for --memory flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-cpu-limit-flag class=md-nav__link> Defaults for --cpu-limit flag </a> </li> <li class=md-nav__item> <a href=#defaults-for-memory-limit-flag class=md-nav__link> Defaults for --memory-limit flag </a> </li> <li class=md-nav__item> <a href=#changing-the-ratios class=md-nav__link> Changing the ratios </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validating-cpu-memory-allocations class=md-nav__link> Validating CPU &amp; Memory Allocations </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/run-ai/docs/edit/master/docs/Researcher/Scheduling/Allocation-of-CPU-and-Memory.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Allocation of CPU and Memory</h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>When we discuss the allocation of deep learning compute resources, the discussion tends to focus on GPUs as the most critical resource. But there are two additional resources that are no less important:</p> <ul> <li>CPUs. Mostly needed for preprocessing and postprocessing tasks during a deep learning training run.</li> <li>Memory. Has a direct influence on the quantities of data a training run can process in batches.</li> </ul> <p>GPU servers tend to come installed with a significant amount of memory and CPUs.</p> <h2 id=requesting-cpu-memory>Requesting CPU &amp; Memory<a class=headerlink href=#requesting-cpu-memory title="Permanent link">&para;</a></h2> <p>When submitting a job, you can request a guaranteed amount of CPUs and memory by using the <strong>--cpu</strong> and <strong>--memory</strong> flags in the <em>runai submit</em> command. For example:</p> <div class=codehilite><pre><span></span><code><span class=err>runai submit job1 -i ubuntu --gpu 2 --cpu 12 --memory 1G</span>
</code></pre></div> <p>The system guarantees that if the job is scheduled, you will be able to receive this amount of CPU and memory.</p> <p>For further details on these flags see: <a href=../../cli-reference/runai-submit/ >runai submit</a></p> <h3 id=cpu-over-allocation>CPU over allocation<a class=headerlink href=#cpu-over-allocation title="Permanent link">&para;</a></h3> <p>The number of CPUs your job will receive is guaranteed to be the number defined using the --cpu flag. In practice, however, you may receive <ins>more CPUs than you have asked</ins> for:</p> <ul> <li>If you are currently alone on a node, you will receive all the node CPUs until such time when another workload has joined.</li> <li>However, when a second workload joins, each workload will receive a number of CPUs <ins>proportional</ins> to the number requested via the --cpu flag. For example, if the first workload asked for 1 CPU and the second for 3 CPUs, then on a node with 40 nodes, the workloads will receive 10 and 30 CPUs respectively. If the flag <code>--cpu</code> is not specified, it will be taken from the cluster default (see the section below)</li> </ul> <h3 id=memory-over-allocation>Memory over allocation<a class=headerlink href=#memory-over-allocation title="Permanent link">&para;</a></h3> <p>The amount of Memory your job will receive is guaranteed to be the number defined using the --memory flag. In practice, however, you may receive <ins>more memory than you have asked</ins> for. This is along the same lines as described with CPU over allocation above.</p> <p>It is important to note, however, that if you have used this memory over-allocation, and new workloads have joined, your job may receive an out of memory exception and terminate.</p> <h2 id=cpu-and-memory-limits>CPU and Memory limits<a class=headerlink href=#cpu-and-memory-limits title="Permanent link">&para;</a></h2> <p>You can limit your job's allocation of CPU and memory by using the <strong>--cpu-limit</strong> and <strong>--memory-limit</strong> flags in the <strong>runai submit</strong> command. For example:</p> <div class=codehilite><pre><span></span><code><span class=err>runai submit job1 -i ubuntu --gpu 2 --cpu 12 --cpu-limit 24 \</span>
<span class=err>    --memory 1G --memory-limit 4G</span>
</code></pre></div> <p>The limit behavior is different for CPUs and memory.</p> <ul> <li>Your job will never be allocated with more than the amount stated in the <code>--cpu-limit</code> flag</li> <li>If your job tries to allocate more than the amount stated in the <code>--memory-limit</code> flag it will receive an out of memory exception.</li> </ul> <p>The limit (for both CPU and memory) overrides the cluster default described in the section below</p> <p>For further details on these flags see: <a href=../../cli-reference/runai-submit/ >runai submit</a></p> <h2 id=flag-defaults>Flag Defaults<a class=headerlink href=#flag-defaults title="Permanent link">&para;</a></h2> <h3 id=defaults-for-cpu-flag>Defaults for --cpu flag<a class=headerlink href=#defaults-for-cpu-flag title="Permanent link">&para;</a></h3> <p>If your job has not specified <code>--cpu</code>, the system will use a default. The default is cluster-wide and is defined as a <strong>ratio</strong> of GPUs to CPUs.</p> <p>Consider the default of 1:6. If your job has only specified <code>--gpu 2</code> and has not specified <code>--cpu</code>, then the implied <code>--cpu</code> flag value is 12 CPUs.</p> <p>The system comes with a cluster-wide default of 1:1. To change the ratio see below.</p> <h3 id=defaults-for-memory-flag>Defaults for --memory flag<a class=headerlink href=#defaults-for-memory-flag title="Permanent link">&para;</a></h3> <p>If your job has not specified <code>--memory</code>, the system will use a default. The default is cluster-wide and is proportional to the number of requested GPUs.</p> <p>The system comes with a cluster-wide default of 100MiB per GPU. To change the ratio see below.</p> <h3 id=defaults-for-cpu-limit-flag>Defaults for --cpu-limit flag<a class=headerlink href=#defaults-for-cpu-limit-flag title="Permanent link">&para;</a></h3> <p>If your job has not specified <code>--cpu-limit</code>, then by default, the system will not set a limit. You can set a cluster-wide limit as a <strong>ratio</strong> of GPUs to CPUs. See below on how to change the ratio.</p> <h3 id=defaults-for-memory-limit-flag>Defaults for --memory-limit flag<a class=headerlink href=#defaults-for-memory-limit-flag title="Permanent link">&para;</a></h3> <p>If your job has not specified <code>--memory-limit</code>, then by default, the system will not set a limit. You can set a cluster-wide limit as a <strong>ratio</strong> of GPUs to Memory. See below on how to change the ratio.</p> <h3 id=changing-the-ratios>Changing the ratios<a class=headerlink href=#changing-the-ratios title="Permanent link">&para;</a></h3> <p>To change the cluster wide-ratio use the following command. The command below sets:</p> <ul> <li>a CPU request with a default ratio of 2:1 CPUs to GPUs.</li> <li>a Memory request with a default ratio of 200MB per GPU.</li> <li>a CPU limit with a default ratio of 4:1 CPU to GPU.</li> <li>a Memory limit with a default ratio of 2GB per GPU. </li> </ul> <div class=codehilite><pre><span></span><code><span class=err>kubectl patch runaiconfig runai -n runai --type=&#39;json&#39; \</span>
<span class=err>    -p=&#39;[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/spec/limitRange&quot;, &quot;value&quot;: </span>
<span class=err>     {&quot;cpuDefaultRequestGpuFactor&quot;: &quot;2&quot;, </span>
<span class=err>      &quot;memoryDefaultRequestGpuFactor&quot;: &quot;200Mi&quot;,</span>
<span class=err>      &quot;cpuDefaultLimitGpuFactor&quot; : &quot;4&quot;,</span>
<span class=err>      &quot;memoryDefaultLimitGpuFactor&quot; : &quot;2Gi&quot;</span>
<span class=err>    }}]&#39;</span>
</code></pre></div> <p>You must specify all 4 values. </p> <h2 id=validating-cpu-memory-allocations>Validating CPU &amp; Memory Allocations<a class=headerlink href=#validating-cpu-memory-allocations title="Permanent link">&para;</a></h2> <p>To review a CPU &amp; Memory allocations you need to look into Kubernetes. A Run:AI job creates a Kubernetes <em>pod</em>. The pod declares its resource requests and limits. To see the memory and CPU consumption in Kubernetes:</p> <ul> <li>Get the pod name for the job by running: <div class=codehilite><pre><span></span><code><span class=err>runai describe job &lt;JOB_NAME&gt;</span>
</code></pre></div> </li> </ul> <p>the pod will appear under <code>PODS</code>. </p> <ul> <li>Run:<div class=codehilite><pre><span></span><code><span class=err>kubectl describe pod &lt;POD_NAME&gt;</span>
</code></pre></div> </li> </ul> <p>The information will appear under <code>Requests</code> and <code>Limits</code>. For example:</p> <div class=codehilite><pre><span></span><code><span class=n>Limits</span><span class=o>:</span>
    <span class=n>nvidia</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>gpu</span><span class=o>:</span>  <span class=mi>2</span>
<span class=n>Requests</span><span class=o>:</span>
  <span class=n>cpu</span><span class=o>:</span>             <span class=mi>1</span>
  <span class=n>memory</span><span class=o>:</span>          <span class=mi>104857600</span>
  <span class=n>nvidia</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>gpu</span><span class=o>:</span>  <span class=mi>2</span>
</code></pre></div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 1, 2020</span> </small> </div> </article> </div> </div> </main> </div> <script src=../../../assets/javascripts/vendor.6a3d08fc.min.js></script> <script src=../../../assets/javascripts/bundle.71201edf.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>